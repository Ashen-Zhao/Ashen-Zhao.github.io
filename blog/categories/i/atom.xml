<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: iOS | å•Šç¥çš„æŠ€æœ¯åšå®¢]]></title>
  <link href="http://ashen-zhao.github.io/blog/categories/i/atom.xml" rel="self"/>
  <link href="http://ashen-zhao.github.io/"/>
  <updated>2017-08-16T19:40:43+08:00</updated>
  <id>http://ashen-zhao.github.io/</id>
  <author>
    <name><![CDATA[Ashen]]></name>
    <email><![CDATA[zhaoashen@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Xcodeä»£ç å…¨é»‘çš„å¦ä¸€ç§è§£å†³åŠæ³•]]></title>
    <link href="http://ashen-zhao.github.io/blog/2017/07/14/xcodedai-ma-quan-hei/"/>
    <updated>2017-07-14T16:44:48+08:00</updated>
    <id>http://ashen-zhao.github.io/blog/2017/07/14/xcodedai-ma-quan-hei</id>
    <content type="html"><![CDATA[<h4>Xcodeä»£ç å…¨é»‘ä¸”æ²¡æœ‰æ™ºèƒ½æç¤ºï¼Œåº”è¯¥ç®—æ˜¯å¼€å‘ä¸­æœ€çƒ¦æ¼çš„äº‹ä¹‹ä¸€äº†å§ï¼Œä¸€æ—¦é‡åˆ°è¿™æ ·é—®é¢˜ï¼Œä¹‹å‰é™¤äº†Cleané¡¹ç›®ï¼Œåˆ é™¤DerivedDataæ–‡ä»¶å¤¹ï¼Œç„¶è€Œè¿™æ ·å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œå¶å°”é‡å¯Xcodeæˆ–è®¸è¿æ°”å¥½çš„è¯ï¼Œå½©è‰²ä¸–ç•Œå°±ä¼šå›æ¥äº†ã€‚</h4>

<h4>è¿æ°”ä¸ºä»€ä¹ˆå¥½å°±èƒ½å›æ¥äº†ï¼Œè”æƒ³åˆ°Xcodeæ¯”è¾ƒåƒå†…å­˜ï¼Œåœ¨è”æƒ³åˆ°æˆ‘è‹¦é€¼çš„4gå†…å­˜ï¼Œä¼°è®¡Xcodeä»£ç å…¨é»‘ï¼Œå¯å†…å­˜æœ‰è”ç³»å‘€ï¼Œç¬é—´èŒ…å¡é¡¿å¼€å‘€ï¼Œèµ¶ç´§æ‰“å¼€æ´»åŠ¨ç›‘è§†å™¨ï¼Œçœ‹åˆ°å ç”¨å†…å­˜æœ€å¤šçš„ SourceKitServiceï¼Œå¤§æ¦‚ç™¾åº¦äº†ä¸‹SourceKitServiceè¿™ä¸ªè¿›ç¨‹ï¼Œä¹Ÿæ²¡å‘ç°æœ‰ä»€ä¹ˆæ¯”è¾ƒä¸¥é‡çš„ä¸œä¸œï¼Œå°±é€€å‡ºSourceKitServiceè¿™ä¸ªè¿›ç¨‹ï¼Œå›åˆ°Xcodeå‘ç°ï¼Œä»£ç ä¸å†æ˜¯å…¨é»‘äº†ï¼Œåˆå›åˆ°å½©è‰²ä¸–ç•Œäº†ï¼Œä¸–ç•Œåˆæ˜¯é‚£ä¹ˆçš„ç¾å¥½ï¼Œç¼–ç¨‹ä¹Ÿå˜å¾—å¿«ä¹äº†</h4>

<h4>æ€»ç»“ï¼ŒXcodeä»£ç å…¨é»‘çš„å¦ä¸€ç§è§£å†³åŠæ³•ï¼Œå°±æ˜¯æ‰“å¼€æ´»åŠ¨ç›‘è§†å™¨ï¼Œé€€å‡ºSourceKitServiceè¿›ç¨‹ï¼Œå°±å¯ä»¥äº†ã€‚</h4>

<p>æ³¨ï¼šå¯èƒ½åªé’ˆå¯¹å†…å­˜æ¯”è¾ƒå°çš„ç”µè„‘ï¼ˆå¦å¤–ï¼šæˆ‘çš„é¡¹ç›®æ˜¯swifté¡¹ç›®ï¼‰</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[UITableViewé‡ç”¨æœºåˆ¶å¯¼è‡´CABasicAnimationåŠ¨ç”»å¤±æ•ˆ]]></title>
    <link href="http://ashen-zhao.github.io/blog/2017/03/02/dong-hua-shi-xiao/"/>
    <updated>2017-03-02T18:24:49+08:00</updated>
    <id>http://ashen-zhao.github.io/blog/2017/03/02/dong-hua-shi-xiao</id>
    <content type="html"><![CDATA[<p>å¼€å‘éšè®°ï¼Œå†ç»™cellä¸Šæ·»åŠ ä¸€ä¸ªå°åŠ¨ç”»å›¾ç‰‡æ—¶ï¼Œé‡åˆ°ä¸€ä¸ªå¾ˆè›‹ç–¼çš„é—®é¢˜ï¼ŒåŠ¨ç”»æ˜æ˜ä¼šåŠ¨ï¼Œè€Œä¸”é€€å‡ºåå°åœ¨å›æ¥ä¹Ÿä¼šåŠ¨ï¼Œå¯å°±æ˜¯æ‹‰å‡ºå±å¹•å¤–ï¼Œåœ¨å›æ¥æ—¶ï¼ŒåŠ¨ç”»å¤±æ•ˆäº†ï¼Œä¸ä¼šåŠ¨äº†ã€‚ä»¥ä¸‹æ˜¯åŠ¨ç”»ä»£ç ï¼Œå°±æ˜¯ä¸€ä¸ªç®€å•çš„æ‘‡æ‘†åŠ¨ç”»</p>

<pre><code>let rotationAnim = CABasicAnimation(keyPath: "transform.rotation.z")
            rotationAnim.toValue = M_PI/5
            rotationAnim.autoreverses = true
            rotationAnim.repeatCount = MAXFLOAT
            rotationAnim.duration = 0.2
            rotationAnim.isRemovedOnCompletion = false
            moveImgv.layer.add(rotationAnim, forKey: nil)
</code></pre>

<!--more-->


<p>äºæ˜¯å°±å¼€å§‹çœ‹CABasicAnimationçš„ç±»çš„å±æ€§è¯´æ˜ï¼Œè¯¥è®¾ç½®çš„éƒ½è®¾ç½®äº†ï¼Œå¯è¿˜æ˜¯ä¸è¡Œï¼Œç™¾åº¦ï¼Œè°·æ­Œï¼Œæœç‹—ç»Ÿç»Ÿæ‰¾ä¸åˆ°åŸå› ï¼Œå…¨æ˜¯CABasicAnimationçš„ç®€å•æ•™ç¨‹ã€‚</p>

<p>æ— å¥ˆè‡³æå‘€ï¼Œå°±å¼€å§‹æ£€æŸ¥ä»£ç ï¼Œçœ‹æœ‰æ²¡æœ‰å¯ä»¥ä¿®æ”¹çš„åœ°æ–¹ï¼Œä¸€é€šä¹±ä¸–åªä¼šï¼Œåœ¨ä¸Šé¢ä»£ç ä¸­çš„æœ€åä¸€è¡Œ<br/>
<code>moveImgv.layer.add(rotationAnim, forKey: nil)</code></p>

<p>æˆ‘å‘ç°forkeyæ˜¯nilï¼Œå¯å½“æˆ‘ç»™å®ƒä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œ</p>

<p><code>moveImgv.layer.add(rotationAnim, forKey: "moveanimation")</code><br/>
å†æ¬¡è°ƒè¯•ï¼Œå´å‘ç°é‡ç”¨åï¼ŒåŠ¨ç”»ç»ˆäºå¯ä»¥åŠ¨äº†ï¼ŒåŸæ¥æˆ‘åºŸäº†é‚£ä¹ˆä¹…çš„æ—¶é—´ï¼Œå´æ˜¯è¿™æ ·çš„é—®é¢˜ï¼ŒçœŸæ˜¯æƒ³å“­ï¼Œåˆæƒ³ç¬‘ğŸ˜ã€‚</p>

<p>å°±æ˜¯è¿™æ ·çš„é—®é¢˜ï¼Œåœ¨ç½‘ä¸Šæ‰¾äº†å¥½ä¹…ï¼Œå´æ‰¾ä¸åˆ°ç»“æœï¼Œå¯èƒ½æ˜¯å¤§å®¶éƒ½å†™äº†keyäº†å§ï¼Œåœ¨æ­¤å†™ä¸‹è¿™è¾¹æ–‡ç« ï¼Œå¸Œæœ›æœ‰é‡åˆ°åƒæˆ‘ä¸€æ ·çš„é—®é¢˜çš„åŒå­¦å¯ä»¥æ‰¾åˆ°è§£å†³åŠæ³•ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOSè‡ªåŠ¨æ‰“åŒ…ä¸Šä¼ è„šæœ¬]]></title>
    <link href="http://ashen-zhao.github.io/blog/2017/02/22/autobuild/"/>
    <updated>2017-02-22T16:46:25+08:00</updated>
    <id>http://ashen-zhao.github.io/blog/2017/02/22/autobuild</id>
    <content type="html"><![CDATA[<p>è‡ªä»å°†swift2.2å‡çº§åˆ°swift3.0, æ¯æ¬¡ä½¿ç”¨Xcode8ç¼–è¯‘éƒ½å¾ˆæ…¢ï¼Œå¾ˆæ˜¯ä¸çˆ½ï¼Œäºæ˜¯æœ‰äº†ç ”ç©¶ä¸‹xcodebuildå‘½ä»¤è¡Œæ‰“åŒ…çš„æƒ³æ³•ï¼Œèµ·åˆä¸çŸ¥é“ç”¨shellï¼Œè¿˜æ˜¯ç”¨python, åœ¨ç½‘ä¸Šå¤§æ¦‚æœäº†ä¸€ä¸‹ï¼Œå…³äºpythonçš„æ¯”è¾ƒå¤šç‚¹ï¼Œäºæ˜¯å°±å…ˆå­¦ä¹ pythonçš„åŸºç¡€è¯­æ³•ï¼Œç„¶åå†å»çœ‹çœ‹å¤§ç¥çš„ä¸€äº›è„šæœ¬ï¼Œå°±å¼€å§‹ä¸“ç ”å‘½ä»¤è¡Œæ‰“åŒ…äº†ã€‚æ€»ä¹‹ï¼Œè¿‡ç¨‹å¾ˆè‰°è¾›ï¼Œç»“æœå¾ˆæ»¡æ„ï¼Œä»¥ä¸‹ä¾¿æ˜¯æˆ‘ä¿®æ”¹åçš„<a href="https://github.com/ashen-zhao/autobuild">pythonè‡ªåŠ¨æ‰“åŒ…è„šæœ¬</a>ï¼Œå‘½ä»¤è¡Œä½¿ç”¨ï¼Œæ‰“åŒ…å®Œæˆä¼šè¯¢é—®æ˜¯å¦ä¸Šä¼ è’²å…¬è‹±å¹³å°ï¼Œä»¥åŠè¯¢é—®æ˜¯å¦ä¸Šä¼ appstoreï¼Œè¿˜æœ‰æ˜¯å¦ä¿ç•™archiveæ–‡ä»¶ã€‚<br/>
<a href="https://github.com/ashen-zhao/autobuild">è‡ªåŠ¨æ‰“åŒ…è„šæœ¬ä¸‹è½½åœ°å€</a></p>

<!--more-->


<h3>ä½¿ç”¨æ–¹æ³•</h3>

<p>1ã€ä¸‹è½½å®Œæˆåï¼Œå°†autobuild.pyä»¥åŠexportOptions.plistæ–‡ä»¶æ”¾åˆ°ä½ çš„é¡¹ç›®è·Ÿç›®å½•ä¸‹ï¼ˆå³ä¸xx.xcworkspaceæˆ–è€…xx.xcworkspaceåœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼‰<br/>
2ã€æ‰“å¼€autobuild.pyï¼Œä¿®æ”¹é…ç½®ä¿¡æ¯<br/>
3ã€æ‰“å¼€å‘½ä»¤ç»ˆç«¯ï¼Œè¿›å…¥é¡¹ç›®æ ¹ç›®å½•<br/>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;a.å¦‚æœä½ æ˜¯xx.xcodeproj
&emsp;&emsp;    <code>./autobuild.py -p youproject.xcodeproj</code><br/>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;b.å¦‚æœä½ æ˜¯xx.xcworkspace<br/>
&emsp;&emsp; <code>./autobuild.py -w youproject.xcworkspace</code></p>

<p>4ã€ç­‰å¾…ç»ˆç«¯å›åº”ï¼Œä¾æ®ç»ˆç«¯æç¤ºè¿›è¡Œç›¸å…³æ“ä½œ<br/>
5ã€æœ€ç»ˆä¼šåœ¨æ¡Œé¢ç”Ÿæˆå¸¦æœ‰æ—¶é—´æˆ³çš„æ–‡ä»¶å¤¹ï¼Œå«ä¹‰ipaä»¥åŠxcarchiveæ–‡ä»¶</p>

<pre>
#!/usr/bin/env python
# -*- coding:utf-8 -*-

#./autobuild.py -p youproject.xcodeproj
#./autobuild.py -w youproject.xcworkspace

import argparse
import subprocess
import requests
import os
import datetime

#configuration for iOS build setting
CONFIGURATION = "Release"
EXPORT_OPTIONS_PLIST = "exportOptions.plist"

#å‘å¸ƒç‰ˆæœ¬å·
VERSION = '1.0.0'
BUILD = '17021803'

#è¦æ‰“åŒ…çš„TARGETåå­—
TARGET = 'ULife'

#Info.plistè·¯å¾„
PLIST_PATH = "xxxxxx/Info.plist"

#å­˜æ”¾è·¯å¾„ä»¥æ—¶é—´å‘½ä»¤
DATE = datetime.datetime.now().strftime('%Y-%m-%d_%H.%M.%S')

#ä¼šåœ¨æ¡Œé¢åˆ›å»ºè¾“å‡ºipaæ–‡ä»¶çš„ç›®å½•
EXPORT_MAIN_DIRECTORY = "~/Desktop/" + TARGET + DATE

#xcarchiveæ–‡ä»¶è·¯å¾„ï¼ˆå«æœ‰dsymï¼‰ï¼Œåç»­æŸ¥æ‰¾BUGç”¨é€”
ARCHIVEPATH = EXPORT_MAIN_DIRECTORY + "/%s%s.xcarchive" %(TARGET,VERSION)

#ipaè·¯å¾„
IPAPATH = EXPORT_MAIN_DIRECTORY + "/%s.ipa" %(TARGET)

#è‹¹æœå¼€å‘è€…è´¦å·
APPLEID = 'xxxxxx'
APPLEPWD = 'xxxxx'

# configuration for pgyer
PGYER_UPLOAD_URL = "http://www.pgyer.com/apiv1/app/upload"
DOWNLOAD_BASE_URL = "http://www.pgyer.com"
USER_KEY = "xxxxxx"
API_KEY = "xxxxx"
#è®¾ç½®ä»è’²å…¬è‹±ä¸‹è½½åº”ç”¨æ—¶çš„å¯†ç 
PYGER_PASSWORD = "xxxxx"

def cleanArchiveFile():
    cleanCmd = "rm -r %s" %(ARCHIVEPATH)
    process = subprocess.Popen(cleanCmd, shell = True)
    process.wait()
    print "cleaned archiveFile: %s" %(ARCHIVEPATH)

def uploadIpaToAppStore():
    print "iPAä¸Šä¼ ä¸­...."
    altoolPath = "/Applications/Xcode.app/Contents/Applications/Application\ Loader.app/Contents/Frameworks/ITunesSoftwareService.framework/Versions/A/Support/altool"

    exportCmd = "%s --validate-app -f %s -u %s -p %s -t ios --output-format xml" % (altoolPath, IPAPATH, APPLEID,APPLEPWD)
    process = subprocess.Popen(exportCmd, shell=True)
    (stdoutdata, stderrdata) = process.communicate()

    validateResult = process.returncode
    if validateResult == 0:
        print '~~~~~~~~~~~~~~~~iPAéªŒè¯é€šè¿‡~~~~~~~~~~~~~~~~'
        exportCmd = "%s --upload-app -f %s -u %s -p %s -t ios --output-format normal" % (
        altoolPath, IPAPATH, APPLEID, APPLEPWD)
        process = subprocess.Popen(exportCmd, shell=True)
        (stdoutdata, stderrdata) = process.communicate()

        uploadresult = process.returncode
        if uploadresult == 0:
            print '~~~~~~~~~~~~~~~~iPAä¸Šä¼ æˆåŠŸ'
        else:
            print '~~~~~~~~~~~~~~~~iPAä¸Šä¼ å¤±è´¥'
    else:
        print "~~~~~~~~~~~~~~~~iPAéªŒè¯å¤±è´¥~~~~~~~~~~~~~~~~"

def parserUploadResult(jsonResult):
    resultCode = jsonResult['code']
    if resultCode == 0:
        downUrl = DOWNLOAD_BASE_URL +"/"+jsonResult['data']['appShortcutUrl']
        print "Upload Success"
        print "DownUrl is:" + downUrl
    else:
        print "Upload Fail!"
        print "Reason:"+jsonResult['message']

def uploadIpaToPgyer(ipaPath):
    print "ipaPath:"+ipaPath
    ipaPath = os.path.expanduser(ipaPath)
    ipaPath = unicode(ipaPath, "utf-8")
    files = {'file': open(ipaPath, 'rb')}
    headers = {'enctype':'multipart/form-data'}
    payload = {'uKey':USER_KEY,'_api_key':API_KEY,'publishRange':'2','isPublishToPublic':'2', 'password':PYGER_PASSWORD}
    print "uploading...."
    r = requests.post(PGYER_UPLOAD_URL, data = payload ,files=files,headers=headers)
    if r.status_code == requests.codes.ok:
        result = r.json()
        parserUploadResult(result)
    else:
        print 'HTTPError,Code:'+r.status_code

def exportArchive():
    exportCmd = "xcodebuild -exportArchive -archivePath %s -exportPath %s -exportOptionsPlist %s" %(ARCHIVEPATH, EXPORT_MAIN_DIRECTORY, EXPORT_OPTIONS_PLIST)
    process = subprocess.Popen(exportCmd, shell=True)
    (stdoutdata, stderrdata) = process.communicate()

    signReturnCode = process.returncode
    if signReturnCode != 0:
        print "export %s failed" %(TARGET)
        return ""
    else:
        return EXPORT_MAIN_DIRECTORY

def buildProject(project):
    archiveCmd = 'xcodebuild -project %s -scheme %s -configuration %s archive -archivePath %s -destination generic/platform=iOS' %(project, TARGET, CONFIGURATION, ARCHIVEPATH)
    process = subprocess.Popen(archiveCmd, shell=True)
    process.wait()

    archiveReturnCode = process.returncode
    if archiveReturnCode != 0:
        print "archive project %s failed" %(project)
        cleanArchiveFile()

def buildWorkspace(workspace):
    archiveCmd = 'xcodebuild -workspace %s -scheme %s -configuration %s archive -archivePath %s -destination generic/platform=iOS' %(workspace, TARGET, CONFIGURATION, ARCHIVEPATH)
    process = subprocess.Popen(archiveCmd, shell=True)
    process.wait()

    archiveReturnCode = process.returncode
    if archiveReturnCode != 0:
        print "archive workspace %s failed" %(workspace)
        cleanArchiveFile()

def xcbuild(options):
    project = options.project
    workspace = options.workspace

    if project is None and workspace is None:
        pass
    elif project is not None:
        buildProject(project)
    elif workspace is not None:
        buildWorkspace(workspace)

    #å¯¼å‡ºipaæ–‡ä»¶
    exportarchive = exportArchive()
    print "~~~~~~~~~~~~~~~~æ˜¯å¦ä¸Šä¼ åˆ°è’²å…¬è‹±~~~~~~~~~~~~~~~~"
    print "        1 ä¸ä¸Šä¼  (é»˜è®¤)"
    print "        2 ä¸Šä¼  "
    isuploadpgyer = raw_input("æ‚¨çš„å†³å®šï¼š")
    if isuploadpgyer == "2" and exportarchive != "":
        uploadIpaToPgyer(IPAPATH)

    print "~~~~~~~~~~~~~~~~æ˜¯å¦ä¸Šä¼ åˆ°AppStore~~~~~~~~~~~~~~~~"
    print "        1 ä¸ä¸Šä¼  (é»˜è®¤)"
    print "        2 ä¸Šä¼  "
    isuploadappstore = raw_input("æ‚¨çš„å†³å®šï¼š")
    if isuploadappstore == '2':
        uploadIpaToAppStore()
    else:
        print "~~~~~~~~~~~~~~~~æ˜¯å¦åˆ é™¤archiveæ–‡ä»¶~~~~~~~~~~~~~~~~"
        print "        1 ä¿ç•™ (é»˜è®¤)"
        print "        2 åˆ é™¤ "
        iscleararchive = raw_input("æ‚¨çš„å†³å®šï¼š")
        if iscleararchive == "2":
            cleanArchiveFile()


def main():

    parser = argparse.ArgumentParser()
    parser.add_argument("-w", "--workspace", help="Build the workspace name.xcworkspace.", metavar="name.xcworkspace")
    parser.add_argument("-p", "--project", help="Build the project name.xcodeproj.", metavar="name.xcodeproj")

    options = parser.parse_args()

    print "options: %s" % (options)

    os.system('/usr/libexec/PlistBuddy -c "Set:CFBundleShortVersionString %s" %s' % (VERSION,PLIST_PATH))
    os.system('/usr/libexec/PlistBuddy -c "Set:CFBundleVersion %s" %s' % (BUILD, PLIST_PATH))

    xcbuild(options)

if __name__ == '__main__':
    main()

</pre>


<hr />
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[é›†æˆå‹ç›Ÿåˆ†äº«ä¸­é‡åˆ°çš„å¥‡æ€ªçš„é”™è¯¯]]></title>
    <link href="http://ashen-zhao.github.io/blog/2017/02/14/qi-guai-de-cuo-wu/"/>
    <updated>2017-02-14T13:35:47+08:00</updated>
    <id>http://ashen-zhao.github.io/blog/2017/02/14/qi-guai-de-cuo-wu</id>
    <content type="html"><![CDATA[<h3>å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›çœ‹ä¼¼ä¸èµ·çœ¼çš„è­¦å‘Šï¼Œå¾€å¾€å´æ˜¯é—®é¢˜çš„æ‰€åœ¨ï¼</h3>

<hr />

<p>è¿™ä¸ï¼Œè¿™æ¬¡æˆ‘å°±é‡åˆ°äº†è¿™ä¸ªå‘ï¼Œä¸ºäº†æé†’è‡ªå·±ä¸è¦è½»æ˜“å¿½ç•¥è­¦å‘Šï¼Œä»¥æ­¤æ–‡ç« è®°å½•ä¸€ä¸‹ï¼ŒåŸ‹å‘çš„è‰°è¾›ã€‚</p>

<p>æˆ‘æ˜¯åœ¨é›†æˆå‹ç›Ÿåˆ†äº«SDKçš„æ—¶å€™ï¼Œä½¿ç”¨<code>cocoapods</code>å¯¼å…¥çš„å‹ç›Ÿåˆ†äº«ç»„ä»¶ï¼Œåœ¨å‘½ä»¤è¡Œæ•²ä¸‹pod installåªä¼šï¼Œå®‰è£…ä¹Ÿå®Œæˆäº†ï¼Œå°±æ˜¯å‡ºç°ä»¥ä¸‹ä¸€äº›è­¦å‘Šï¼Œæˆ‘å¤§æ¦‚æµè§ˆäº†ä¸€ä¸‹ï¼Œçœ‹ä¸å‡ºæ‰€ä»¥ç„¶ï¼Œå°±æ²¡ç®¡, ç»§ç»­åœ¨é›†æˆã€‚</p>

<!--more-->


<p><i>[!] The <code>ULife [Debug]</code> target overrides the <code>OTHER_LDFLAGS</code> build setting defined in <code>Pods/Target Support Files/Pods-ULife/Pods-ULife.debug.xcconfig'. This can lead to problems with the CocoaPods installation
    - Use the</code>$(inherited)` flag, or
    - Remove the build settings from the target.</p>

<p>[!] The <code>ULife [Release]</code> target overrides the <code>OTHER_LDFLAGS</code> build setting defined in <code>Pods/Target Support Files/Pods-ULife/Pods-ULife.release.xcconfig'. This can lead to problems with the CocoaPods installation
    - Use the</code>$(inherited)` flag, or
    - Remove the build settings from the target.<br/>
</i></p>

<p>ç›´åˆ°æˆ‘å¼€å§‹ä½¿ç”¨å‹ç›Ÿçš„ä¸€äº›ç±»åº“æ—¶ï¼Œä½¿ç”¨ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå¯å½“æˆ‘ç¼–è¯‘æ—¶ï¼Œå´å‡ºç°äº†ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>

<p><i>Undefined symbols for architecture arm64:
  &ldquo;<em>OBJC_CLASS</em>$_UMSocialManager&rdquo;, referenced from:
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation) </i></p>

<p>å’‹ä¸€çœ‹ï¼Œè¿˜ä»¥ä¸ºæ˜¯ä¸æ”¯æŒ64ä½å‘¢ï¼Œå¯æ˜¯å®˜æ–¹æ˜æ˜å†™ç€æ”¯æŒ64ä½çš„ï¼Œä¹Ÿå°±æ²¡æœ‰å»æ€€ç–‘å®˜æ–¹ï¼Œå°±å¼€å§‹å„ç§æ¸…ç†ç¼“å­˜ï¼Œé‡å¤ç¼–è¯‘ï¼Œå„ç§è°·æ­Œï¼Œç™¾åº¦ï¼Œå¯ç»ˆç©¶æ²¡æœ‰å¯è¡Œçš„åŠæ³•ã€‚å»å‹ç›Ÿé—®å®¢æœï¼Œæ²Ÿé€šæˆæœ¬å¤ªé«˜ï¼Œæ¯æ¬¡æ‰çº¿ï¼Œé‡æ–°è¿æ¥åˆæ˜¯ä¸€ä¸ªæ–°äººï¼Œä¹Ÿæœªèƒ½è§£å†³ã€‚</p>

<p>å®åœ¨æ²¡æœ‰åŠæ³•äº†ï¼Œæˆ‘åˆé‡æ–°pod updateä¸€ä¸‹ï¼Œè¿™æ¬¡å‘ç°ä¾ç„¶æ˜¯ä¸Šé¢æåˆ°çš„è­¦å‘Šä¿¡æ¯ï¼Œè¿™æ¬¡æˆ‘æ²¡æœ‰å¿½ç•¥ï¼Œè€Œæ˜¯ä»”ç»†çš„çœ‹äº†ä¸‹ï¼Œå¤§æ¦‚çŸ¥é“äº†ï¼Œäº§ç”Ÿæ­¤è­¦å‘Šçš„åŸå› æ˜¯é¡¹ç›® Target ä¸­çš„ä¸€äº›è®¾ç½®ï¼ŒCocoaPods ä¹Ÿåšäº†é»˜è®¤çš„è®¾ç½®ï¼Œå¦‚æœä¸¤ä¸ªè®¾ç½®ç»“æœä¸ä¸€è‡´ï¼Œå°±ä¼šé€ æˆé—®é¢˜ã€‚</p>

<p>è­¦å‘Šä¸­ï¼Œæç¤ºè¦æƒ³ä½¿ç”¨cocoapodsä¸­çš„è®¾ç½®ï¼Œéœ€è¦åœ¨é¡¹ç›®ä¸­å®šä¹‰<code>PODS_ROOT</code> å’Œ <code>Other Linker Flags</code>çš„åœ°æ–¹ï¼ŒæŠŠä»–ä»¬çš„å€¼ç”¨<code>$(inherited)</code>æ›¿æ¢æ‰ã€‚</p>

<p>å¤§è‡´è§£å†³åŠæ³•çŸ¥é“äº†ï¼Œ å¼€å§‹åœ¨<code>Build Settings</code>ä¸­çš„PODS_ROOT<code>å’Œ</code>Other Linker Flags<code>å¤„è¿›è¡Œä¿®æ”¹ï¼Œæ·»åŠ ä¸€é¡¹</code>$(inherited)<code>ï¼ŒOther Linker Flags</code>æˆ‘è¿™é‡Œæ²¡æœ‰æ›¿æ¢æ‰ï¼Œè€Œæ˜¯æ·»åŠ ä¸€é¡¹ï¼Œæ€•æˆ‘æœ¬æ¥çš„é¡¹ä¹Ÿæ˜¯æœ‰ç”¨çš„ï¼Œå°±æ²¡æœ‰æ›¿æ¢ã€‚</p>

<p>æœ€åä¿®æ”¹åï¼Œæˆ‘å†æ¬¡ç¼–è¯‘ï¼Œç«Ÿç„¶é€šè¿‡äº†ï¼Œæˆ‘å–œæè€Œæ³£çš„å†™ä¸‹äº†è¿™ç¯‡æ–‡ç« æ¥è®°å½•ä¸‹è¿™æ¬¡å¿½ç•¥è­¦å‘Šçš„æ•™è®­ç»å†ã€‚</p>

<hr />

<p>æ³¨ï¼šåœ¨æˆ‘åœ¨ç½‘ä¸Šæœç´¢æ—¶ï¼Œæœ‰è¯´ï¼Œç‚¹å‡»é¡¹ç›®æ–‡ä»¶ project.xcodeprojï¼Œå³é”®<code>æ˜¾ç¤ºåŒ…å†…å®¹</code>ï¼Œç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€<code>project.pbxproj</code>ï¼Œåˆ é™¤<code>OTHER_LDFLAGS</code>çš„åœ°æ–¹ï¼Œä¿å­˜ï¼Œå›åˆ° Xcodeï¼Œç¼–è¯‘ä¹Ÿèƒ½é€šè¿‡ã€‚è¿™ç§åˆ é™¤å†…å®¹çš„è§£å†³åŠæ³•ï¼Œæˆ‘ä¸€èˆ¬ä¸è½»æ˜“ä½¿ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘æ²¡æœ‰å»è¯å®è¿™ç§åšæ³•ï¼Œè‹¥æœ‰å…´è¶£ï¼Œä½ å¯ä»¥å°è¯•ä¸‹ï¼Œä¸è¿‡åšå¥½å¤‡ä»½å“¦~~</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[æ¢ç´¢Xcode8ç¼–è¯‘ä¸ºä»€ä¹ˆé‚£ä¹ˆæ…¢ï¼Ÿ]]></title>
    <link href="http://ashen-zhao.github.io/blog/2016/12/21/xcode8build/"/>
    <updated>2016-12-21T10:12:58+08:00</updated>
    <id>http://ashen-zhao.github.io/blog/2016/12/21/xcode8build</id>
    <content type="html"><![CDATA[<h3>èƒŒæ™¯</h3>

<p>éšç€<code>Xcode8</code>å’Œ<code>swift3.0</code>çš„æ­£å¼åˆ°æ¥ï¼Œæˆ‘å¼€å§‹ç€æ‰‹å°†<code>swift2.3</code>çš„é¡¹ç›®è½¬åˆ°<code>swift3</code>ï¼ˆè‡³äºè½¬æ¢è¿‡ç¨‹ï¼Œè¿™é‡Œä¸å¤šåšä»‹ç»ï¼ŒXcodeè‡ªå¸¦çš„è½¬æ¢å·¥å…·ï¼ŒåŸºæœ¬å¯ä»¥è½¬æ¢80%å·¦å³ï¼Œå‰©ä¸‹çš„è‡ªå·±æ…¢æ…¢è°ƒè¯•å³å¯ã€‚ï¼‰ä½†æ˜¯ï¼Œè½¬åˆ°swift3åªä¼šï¼Œåœ¨ç”¨Xcode8ç¼–è¯‘ï¼Œå‘ç°ç¼–è¯‘è¿‡ç¨‹å˜å¾—éå¸¸æ…¢ï¼Œå“ªæ€•æ‰“ä¸€ä¸ªç©ºæ ¼ï¼Œéƒ½è¦é‡æ–°ç¼–è¯‘å¾ˆä¹…ã€‚äºæ˜¯åœ¨ç½‘ä¸ŠæŸ¥æ‰¾è§£å†³åŠæ³•ï¼ŒæŸ¥æ‰¾äº†åŠå¤©å„ç§æ–¹æ³•å…¨ç”¨ï¼Œå‘ç°äºäº‹æ— è¡¥ã€‚<br/>
&emsp;&emsp;æœ‰ä»€ä¹ˆåŠ ä¸€ä¸ª<code>HEADERMAP_USES_VFS = YES</code>ï¼ˆï¼‰<a href="http://www.cnblogs.com/qqsscc/p/6044234.html">è¿™æ˜¯åœ°å€ï¼Œåæ­£è¿™ä¸ªå¯¹æˆ‘æ²¡ç”¨ï¼Œæ„Ÿå…´è¶£çš„è¯è‡ªå·±è¯•è¯•</a></p>

<h5>é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘å°±è‡ªå·±æ¢ç´¢ï¼Œå‡ºå‘ç‚¹æ˜¯æ’æŸ¥å“ªäº›æ–‡ä»¶ï¼Œå“ªäº›æ–¹æ³•å¯¼è‡´ç¼–è¯‘å˜æ…¢ï¼Ÿ</h5>

<h3>æ¢ç´¢Xcodeç¼–è¯‘ï¼Œåœ¨å“ªäº›åœ°æ–¹å¯ä»¥çœ‹åˆ°ç¼–è¯‘æ–‡ä»¶è¿‡ç¨‹</h3>

<hr />

<p>é€šè¿‡å¤šæ¬¡ç¼–è¯‘æŸ¥çœ‹ï¼Œå‘ç°åœ¨Xcodeå·¦è¾¹æ ï¼Œæœ€åä¸€ä¸ªé€‰é¡¹ï¼Œæ˜¯æ¯æ¬¡çš„ç¼–è¯‘è¿è¡Œç­‰è®°å½•ï¼Œ æ¯è¡Œè®°å½•ä¸­éƒ½ä¼šæœ‰æ¯æ¬¡ç¼–è¯‘çš„æ–‡ä»¶ç¼–è¯‘è®°å½•ã€‚å¦‚ä¸‹å›¾</p>

<!--more-->


<p>
<img src="/images/build1.png" alt="å›¾1" /></p>

<p>å†æ¬¡æŸ¥çœ‹æ­£åœ¨ç¼–è¯‘çš„ä¸€æ¡è®°å½•(æ­£åœ¨ç¼–è¯‘çš„è®°å½•åé¢æœ‰ä¸€ä¸ªè½¬åœˆåœˆçš„â€èŠèŠ±â€œ)ï¼Œå‘ç°æœ‰å›¾ä¸­1ã€2ä¸¤ç§æ ‡è¯†ï¼Œ ä¸€ä¸ªç»¿è‰²âœ…è¯´æ˜ï¼Œè¿™æ˜¯ç¼–è¯‘å®Œæˆäº†ï¼Œå¦ä¸€ä¸ªæ˜¯ç°è‰²â†’ç®­å¤´ï¼Œè¯´æ˜æ˜¯æ­£åœ¨ç¼–è¯‘ï¼›æ­¤æ—¶å‘ç°ç°è‰²ä¸€ç›´åœç•™åœ¨è¿™é‡Œï¼ŒæŒ‡å‘å›¾ä¸­çš„æ–‡ä»¶ï¼Œå·¦è¾¹çš„èŠèŠ±ä¸€ç›´è½¬ä¸ªä¸åœï¼Œ ç¼–è¯‘å¡ä½äº†ã€‚è¿™æ ·ä¸€æ¥å°±æ‰¾åˆ°ç¼–è¯‘æ˜¯ä»€ä¹ˆæ–‡ä»¶å¯¼è‡´çš„é‚£ä¹ˆæ…¢ã€‚</p>

<p><img src="/images/build2.png" alt="å›¾2" /></p>

<h3>æ’æŸ¥æ–‡ä»¶ä¸­å“ªäº›ä»£ç å¯¼è‡´çš„ç¼–è¯‘å¡ä½ï¼Ÿ</h3>

<hr />

<p>æ’æŸ¥çš„æ–¹æ³•ï¼Œé‡‡ç”¨æ¯”è¾ƒç¬¨çš„æ–¹æ³•ï¼Œæš´åŠ›æ³¨é‡Šæ–¹æ³•ï¼š<strong><em>å°±æ˜¯æ³¨é‡Šæ‰¾åˆ°å¡ä½çš„æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ–¹æ³•é‡Œçš„ä»£ç ï¼Œä¸è¦æ³¨é‡Šæ–¹æ³•ï¼Œå†æ¬¡ç¼–è¯‘ï¼Œæ­¤æ—¶å‘ç°è¯¥æ–‡ä»¶å¾ˆå¿«é€šè¿‡ç¼–è¯‘ï¼Œç„¶ååœ¨ä¾æ¬¡è§£å¼€éƒ¨åˆ†æ–¹æ³•æ³¨é‡Šï¼Œå†æ¬¡ç¼–è¯‘ï¼Œç›´åˆ°å‘ç°è§£å¼€æŸä¸ªæ–¹æ³•çš„æ³¨é‡Šåï¼Œç¼–è¯‘å†æ¬¡å¡ä½ï¼Œé‚£å°±è¯´æ˜é‚£ä¸ªæ–¹æ³•ä¸­çš„ä»£ç å†™çš„æœ‰é—®é¢˜ï¼Œç„¶ååœ¨ä¾æ¬¡æ³¨é‡Šï¼Œè§£å¼€æ³¨é‡Šï¼Œæ’æŸ¥æ–¹æ³•ä¸­çš„æŸä¸€è¡Œä»£ç çš„é—®é¢˜ã€‚</em></strong>ç»è¿‡ä¸€ç•ªæ’æŸ¥ï¼Œæˆ‘æ‰¾åˆ°äº†æˆ‘ä»£ç ä¸­å¡ä½çš„éƒ¨åˆ†ä»£ç ï¼Œå¦‚ä¸‹å›¾çº¢è‰²åœˆä¸­çš„ä»£ç </p>

<p><img src="/images/build3.png" alt="å›¾3" /></p>

<p><font color=red>åœ¨å­—å…¸ä¸­çš„keyå¯¹åº”çš„valueï¼Œæ²¡æœ‰ç»™ç›´æ¥çš„å€¼ï¼Œè€Œæ˜¯ç»™å‡ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿™æ ·ä¼šå¯¼è‡´Xcode8çš„ç¼–è¯‘é€Ÿåº¦æå…¶æ…¢ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œä¹‹å‰çš„Xcodeç‰ˆæœ¬æ˜¯æ²¡æœ‰çš„ã€‚</font></p>

<p>æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼Œè§£å†³é—®é¢˜å°±ç®€å•äº†ï¼Œäºæ˜¯ä¿®æ”¹ä»£ç å¦‚ä¸‹å›¾ï¼š</p>

<p><img src="/images/build4.png" alt="å›¾4" /></p>

<p>ä¿®æ”¹ä¹‹åï¼Œå†æ¬¡ç¼–è¯‘ï¼Œé‡æ–°å›åˆ°äº†å¿«é€Ÿç¼–è¯‘çš„æ—¶ä»£äº†ï¼Œå†ä¹Ÿä¸ç”¨ç­‰ä¸Š5-10åˆ†é’Ÿä¸ç­‰äº†ã€‚</p>

<p>  ä»¥ä¸Šè¿‡ç¨‹ï¼Œæ˜¯é’ˆå¯¹æˆ‘é‡åˆ°çš„é—®é¢˜è€Œè¨€çš„ï¼Œä¸çŸ¥é“æ˜¯å¦å­˜åœ¨æ™®éæ€§ï¼Œå¦‚è‹¥ä½ ä¹Ÿé‡åˆ°ï¼Œåˆšå¥½çœ‹äº†æˆ‘çš„æ–‡ç« ï¼Œä¹Ÿè§£å†³äº†é—®é¢˜ï¼Œé‚£å°±ä¼šå¿ƒä¸€ç¬‘å§ï¼Œå¦‚è‹¥ä½ ä¹Ÿé‡åˆ°äº†ï¼Œä½†æ˜¯æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œä¹Ÿè¯·ä½ ä¼šå¿ƒä¸€ç¬‘å§ã€‚<br/>
     <a href="https://forums.developer.apple.com/thread/62737">è¿™æ˜¯è‹¹æœå¼€å‘è€…æåˆ°çš„Xcode8ç¼–è¯‘è¶…æ…¢çš„é—®é¢˜ï¼Œæˆ‘çœ‹äº†ä¸‹ï¼Œä¹Ÿåšäº†å¯¹åº”ä¿®æ”¹ï¼Œå‘ç°å¯¹æˆ‘å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œ æ„Ÿå…´è¶£çš„è¯è¿›å»çœ‹çœ‹å§</a></p>

<p>æœ‰æ—¶å€™è‡ªå·±æ…¢æ…¢å»æ¢ç´¢å‡ºé—®é¢˜çš„æ‰€åœ¨ï¼Œä¹Ÿæ˜¯å¾ˆä¸é”™çš„ä½“éªŒã€‚</p>

<hr />

<h3>åçŸ¥åè§‰</h3>

<hr />

<p>åæ¥æˆ‘çŸ¥é“äº†ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ï¼ŒæŸ¥çœ‹å…·ä½“çš„swiftå‡½æ•°ç¼–è¯‘æ—¶é—´æ¥å®šä½å“ªä¸ªå‡½æ•°å¡ä½äº†ï¼Œè€Œä¸ç”¨<code>æš´åŠ›æ³¨é‡Šæ³•</code>.<br/>
é¦–å…ˆè¦åˆ°Build Settings ç»™ Other Swift Flags  æ·»åŠ ä¸€é¡¹<code>
-Xfrontend -debug-time-function-bodies</code> <br/>
å°±å¯ä»¥æŸ¥çœ‹ç¼–è¯‘é€šè¿‡çš„æ–‡ä»¶ä¸­çš„å‡½æ•°ç¼–è¯‘æ—¶é—´ï¼Œæ‰¾åˆ°ç»¿è‰²âœ…çš„æ–‡ä»¶çš„é‚£ä¸€è¡Œï¼Œåœ¨æœ€åé¢æœ‰ä¸€ä¸ªå›¾æ ‡ï¼Œç‚¹å‡»å±•å¼€å…·ä½“å†…å®¹ï¼Œå‘ä¸‹ç§»åŠ¨å°±ä¼šçœ‹åˆ°æ¯ä¸ªå‡½æ•°æ‰§è¡Œçš„å…·ä½“æ—¶é—´ã€‚</p>
]]></content>
  </entry>
  
</feed>
