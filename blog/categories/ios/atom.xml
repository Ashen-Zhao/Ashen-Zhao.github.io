<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Ios | å•Šç¥çš„æŠ€æœ¯åšå®¢]]></title>
  <link href="http://ashen-zhao.github.io/blog/categories/ios/atom.xml" rel="self"/>
  <link href="http://ashen-zhao.github.io/"/>
  <updated>2016-01-18T21:13:00+08:00</updated>
  <id>http://ashen-zhao.github.io/</id>
  <author>
    <name><![CDATA[Ashen]]></name>
    <email><![CDATA[zhaoashen@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[iOS å¤šè¯­è¨€ç‰ˆæœ¬çš„å¼€å‘ï¼ˆä¸‰ï¼‰]]></title>
    <link href="http://ashen-zhao.github.io/blog/2016/01/18/localized03/"/>
    <updated>2016-01-18T16:06:48+08:00</updated>
    <id>http://ashen-zhao.github.io/blog/2016/01/18/localized03</id>
    <content type="html"><![CDATA[<h3>å†™åœ¨å‰è¨€</h3>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS å¤šè¯­è¨€ç‰ˆæœ¬çš„å¼€å‘ï¼ˆäºŒï¼‰]]></title>
    <link href="http://ashen-zhao.github.io/blog/2016/01/15/localized02/"/>
    <updated>2016-01-15T05:13:56+08:00</updated>
    <id>http://ashen-zhao.github.io/blog/2016/01/15/localized02</id>
    <content type="html"><![CDATA[<h3>é¢˜è®°</h3>

<p>&emsp;&emsp;<a href="/blog/2016/01/14/localized01/">iOS å¤šè¯­è¨€ç‰ˆæœ¬çš„å¼€å‘ï¼ˆä¸€ï¼‰</a> ä¸­æˆ‘ä»¬å®Œæˆäº†è®©åº”ç”¨è·Ÿéšç³»ç»Ÿè¯­è¨€è¿›è¡Œåˆ‡æ¢ï¼Œè€Œç”¨æˆ·è‡ªå·±å´ä¸èƒ½åˆ‡æ¢çš„åŠŸèƒ½ï¼Œä¹ŸåŸºæœ¬ä¸Šç®—æ˜¯å®ç°äº†å¤šè¯­è¨€ç‰ˆæœ¬ï¼›å¯æ˜¯ï¼Œå¯¹äºæŸäº›åº”ç”¨æ¥è¯´ï¼Œå®ç°è·Ÿéšç³»ç»Ÿè¯­è¨€åˆ‡æ¢çš„åŒæ—¶ï¼Œ ä¹Ÿæƒ³è¦å®ç°è®©ç”¨æˆ·è‡ªå·±é€‰æ‹©åº”ç”¨è¯­è¨€ç‰ˆæœ¬çš„åŠŸèƒ½ï¼›é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œåˆ©ç”¨è¿™ç¯‡æ–‡ç« æ¥å†™å†™å¦‚ä½•è®©ç”¨æˆ·è‡ªå·±åˆ‡æ¢åº”ç”¨è¯­è¨€ç‰ˆæœ¬ï¼›</p>

<h3>è¯­è¨€æ–‡ä»¶å­˜åœ¨çš„å½¢å¼</h3>

<p>æƒ³è¦å®ç°ç”¨æˆ·è‡ªå·±æ‰‹åŠ¨åˆ‡æ¢è¯­è¨€ç‰ˆæœ¬ï¼Œå°±å…ˆè¦äº†è§£è¯­è¨€æ–‡ä»¶åœ¨èµ„æºæ–‡ä»¶ä¸­å­˜åœ¨çš„å½¢å¼;</p>

<p><img src="/images/localized09.png" alt="å¤šè¯­è¨€" /></p>

<p>å¦‚å›¾ä¸­ï¼Œä¸ç®¡æ˜¯è‹±è¯­ï¼ˆen.lprojï¼‰ã€ç®€ä½“ï¼ˆzh-Hans.lprojï¼‰ã€è¿˜æ˜¯ç¹ä½“ï¼ˆzh-Hant.lprojï¼‰éƒ½æ˜¯ä»¥<code>.lproj</code> çš„æ–‡ä»¶å¤¹å½¢å¼å­˜åœ¨, æ‰€ä»¥å½“æˆ‘ä»¬è¦åˆ‡æ¢è¯­è¨€çš„æ—¶å€™ï¼Œå…¶å®ä¹Ÿå°±æ˜¯åšåˆ°å»å–è¿™äº›<code>.lproj</code> æ–‡ä»¶å¤¹ä¸­çš„<code>ASLocalized.strings</code>æ–‡ä»¶ï¼›</p>

<!--more-->


<p>
&emsp;åˆ°è¿™é‡Œï¼ŒåŸç†åº”è¯¥æ‡‚äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯åŠ¨æ‰‹å®ç°äº†ï¼›</p>

<h3>æ ¹æ®è¯­è¨€è·å– ASLocalized.strings</h3>

<p>è¿™æ—¶å€™ï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„<code>è¯­è¨€.lproj</code> è·å–åˆ°å¯¹åº”çš„<code>ASLocalized.strings</code>è¯­è¨€æ–‡ä»¶, ä»è€Œè®©é¡µé¢æ˜¾ç¤ºå¯¹åº”çš„è¯­è¨€å†…å®¹;<br/>
è¿™é‡Œæš‚ä¸”å…ˆæ ¹æ®Englishè·å–è‹±è¯­çš„è¯­è¨€æ–‡ä»¶ï¼ŒEnglish çš„.lprojå­˜åœ¨çš„å½¢å¼æ˜¯<code>en.lproj</code></p>

<pre><code>
NSString *path = [[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"];
NSString *showValue = [[NSBundle bundleWithPath:path] localizedStringForKey:@"showTxt" value:nil table:@"ASLocalized"];
NSLog(@"result: %@", showValue);
 </code></pre>


<p>è¾“å‡ºç»“æœï¼šresult: this is test text</p>

<p>ä»¥ä¸Šä»£ç ï¼Œåªæ˜¯ä»¥English ä¸ºè¯­è¨€æ–‡ä»¶ï¼Œæ˜¯å†™æ­»çš„ï¼Œå¦‚æœæƒ³è¦è®©ç”¨æˆ·è‡ªå·±æ‰‹åŠ¨æ”¹å˜ï¼Œåªéœ€è¦æ›¿æ¢æ‰ <code>[[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"]</code> ä¸­çš„<code>en</code> ä¸ºå…¶ä»–çš„è¯­è¨€æ ‡è¯†å°±å¥½äº†ï¼› æ—¢ç„¶æ˜¯ç”¨æˆ·æ‰‹åŠ¨åˆ‡æ¢ï¼Œé‚£å°±éœ€è¦å†™ä»£ç å»å®ç°äº†ï¼›</p>

<p>åˆ°è¿™é‡Œï¼Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ<strong><em>å¦‚ä½•è®©ç”¨æˆ·é€‰æ‹©åä¸€ä¸ªè¯­è¨€åï¼Œå³ä½¿ç¨‹åºé€€å‡ºåï¼Œä¸‹æ¬¡è¿›å…¥ä¾ç„¶ä¿ç•™å‘¢</em></strong>ï¼Œ æ—¢ç„¶éœ€è¦ä¿å­˜æ•°æ®ï¼Œå°±è¦æ¶‰åŠåˆ°æœ¬åœ°å­˜å‚¨äº†ï¼Œå¯¹äºå°‘é‡çš„ä¿å­˜æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>NSUserDefaults</code> æ¥æ“ä½œï¼Œç®€å•æ–¹ä¾¿å¿«æ·ï¼›è‡³äºå…¶ä»–çš„å­˜å‚¨æ–¹å¼å››å¤§åŸºæœ¬å¯¹è±¡çš„writeæ–¹æ³•ï¼Œå½’æ¡£ï¼Œsqlliteï¼ŒCoreData éœ€è¦çš„åŒå­¦ï¼Œå¯ä»¥è‡ªå·±å»è„‘è¡¥ï¼Œè¿™é‡Œæˆ‘ä¸å¤šä»‹ç»äº†ï¼›</p>

<h3>ä½¿ç”¨NSUserDefaults è®°å½•é€‰æ‹©çš„è¯­è¨€</h3>

<p>è¿™é‡Œæˆ‘ç®€å•å†™äº†ä¸ªç•Œé¢ï¼Œä½œä¸ºè¾…åŠ©è®²è§£</p>

<p><img src="http://ashen-zhao.github.io/images/localized10.png" alt="å¤šè¯­è¨€" width="300" height="450"></p>

<pre><code>
- (IBAction)changeLanguage:(UIButton *)sender {
    
    switch (sender.tag) {
        case 101: { //ç®€ä½“
            [[NSUserDefaults standardUserDefaults] setObject:@"zh-Hans" forKey:appLanguage];
        }
            break;
        case 102: { //ç¹ä½“
            [[NSUserDefaults standardUserDefaults] setObject:@"zh-Hant" forKey:appLanguage];
        }
            break;
        case 103: { //English
            [[NSUserDefaults standardUserDefaults] setObject:@"en" forKey:appLanguage];
        }
            break;
        default:
            break;
    }
}
</code></pre>


<p></p>

<p>ä»¥ä¸Šæ–¹æ³•ï¼Œæ˜¯å›¾ä¸­ä¸‰ç§è¯­è¨€çš„ç‚¹å‡»äº‹ä»¶ï¼Œåˆ†åˆ«å°†å¯¹åº”çš„è¯­è¨€æ ‡è¯†ï¼Œè®°å½•åˆ°<code>NSUserDefaults</code> å¯¹åº”çš„ <code>appLanguage</code> key ä¸­</p>

<p>æ—¢ç„¶é‡æ–°é€‰æ‹©äº†è¯­è¨€ï¼Œå°±éœ€è¦é‡æ–°åŠ è½½æ§ä»¶çš„å†…å®¹ï¼Œå› ä¸ºæ˜¯DemoğŸ´ï¼Œè¿™é‡Œç›´æ¥å°†ç»™æ§ä»¶èµ‹å€¼å†™æˆä¸€ä¸ªæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p>

<pre><code>
- (void)showLbl {
    NSString *lanType =[NSString stringWithFormat:@"%@", [[NSUserDefaults standardUserDefaults] objectForKey:@"appLanguage"]];
    
    NSString *path = [[NSBundle mainBundle] pathForResource:lanType ofType:@"lproj"];
    
    NSString *showValue = [[NSBundle bundleWithPath:path] localizedStringForKey:@"showTxt" value:nil table:@"ASLocalized"];
    NSLog(@"result: %@", showValue);
    self.lblShowTxt.text = showValue;
}

</code></pre>


<p></p>

<p>å¯å°†æ­¤æ–¹æ³•åœ¨ç‚¹å‡»äº‹ä»¶ä¸­è°ƒç”¨ä¸‹ï¼Œå³å¯ï¼›</p>

<p>Demoæ•ˆæœå›¾ï¼š</p>

<p><img src="/images/localized11.gif" alt="å¤šè¯­è¨€" /></p>

<h3>é¦–æ¬¡è¿›å…¥åº”ç”¨çš„è€ƒè™‘</h3>

<p>åˆ°è¿™é‡Œï¼Œè¿˜æ²¡æœ‰å®Œï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸‹ï¼Œç”¨æˆ·ç¬¬ä¸€æ¬¡è¿›æ¥æ—¶ï¼Œè¯¥æ˜¾ç¤ºä»€ä¹ˆæ ·çš„è¯­è¨€ï¼Œæ˜¯è·Ÿéšç³»ç»Ÿï¼Œè¿˜æ˜¯æˆ‘ä»¬ç»™ä¸€ç§é»˜è®¤çš„è¯­è¨€ï¼›</p>

<h4>1ã€ç»™ä¸€ç§é»˜è®¤è¯­è¨€</h4>

<p>è¿™ç§å¤„ç†å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨<code>didFinishLaunchingWithOptions</code> æ–¹æ³•ä¸­ï¼Œè¿›è¡Œåˆ¤æ–­æœ¬åœ°æ˜¯å¦è®°å½•äº†è¯­è¨€æ ‡è¯†ï¼Œå¦‚æœæ²¡æœ‰ç»™ä¸€ç§é»˜è®¤å³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre>`
if (![[NSUserDefaults standardUserDefaults] objectForKey:appLanguage]) { 
     [[NSUserDefaults standardUserDefaults] setObject:@"zh-Hans"    forKey:appLanguage];
}`</pre>


<p></p>

<h4>2ã€è·Ÿéšç³»ç»Ÿè¯­è¨€</h4>

<p>è¿™ç§å¤„ç†ç›¸å¯¹æ¥è¯´ï¼Œæ¯”è¾ƒå¤æ‚å†™ï¼Œé¦–é¡µéœ€è¦è·å–ç³»ç»Ÿçš„é¦–é€‰è¯­è¨€é¡ºåºï¼Œç„¶åå–ç¬¬ä¸€ä¸ªé¦–é€‰è¯­è¨€ï¼Œå…¶æ¬¡ï¼Œè¿˜è¦åˆ¤æ–­ä½ è¦åšçš„è¯­è¨€ç‰ˆæœ¬ï¼Œé¦–é€‰è¯­è¨€ç»„ä¸­å­˜åœ¨ä¸å¦ï¼›<br/>
è·å–é¦–é€‰è¯­è¨€ï¼š<code> NSArray  *languages = [NSLocale preferredLanguages];</code><br/>
è·å–ç¬¬ä¸€ä¸ªé¦–é€‰è¯­è¨€ï¼š<code> NSString *language = [languages objectAtIndex:0];</code></p>

<p>å¤„ç†è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>

<pre><code>
if (![[NSUserDefaults standardUserDefaults] objectForKey:appLanguage]) {
        NSArray  *languages = [NSLocale preferredLanguages];
        NSString *language = [languages objectAtIndex:0];
        if ([language hasPrefix:@"zh-Hans"]) {
            [[NSUserDefaults standardUserDefaults] setObject:@"zh-Hans" forKey:appLanguage];
        } else if ([language hasPrefix:@"zh-TW"] || [language hasPrefix:@"zh-HK"] || [language hasPrefix:@"zh-Hant"]) {
            [[NSUserDefaults standardUserDefaults] setObject:@"zh-Hant" forKey:appLanguage];
        } else if ([language hasPrefix:@"en"]) {
            [[NSUserDefaults standardUserDefaults] setObject:@"en" forKey:appLanguage];
        }else{
            [[NSUserDefaults standardUserDefaults] setObject:@"zh-Hans" forKey:appLanguage];
        }
    }
</code></pre>


<p></p>

<p>æ³¨ï¼šç”±äºç¹ä½“åˆæœ‰å°æ¹¾ç¹ä½“å’Œé¦™æ¸¯ç¹ä½“ä¹‹åˆ†ï¼Œæ‰€ä»¥ä»£ç ä¸­ä¹Ÿåšå‡ºäº†ç›¸åº”çš„å¤„ç†ï¼›</p>

<p>â•®(â•¯â–½â•°)â•­ åˆ°äº†è¿™é‡ŒåŸºæœ¬ä¸Šç®—æ˜¯å®Œæˆäº†å¤šè¯­è¨€ç‰ˆæœ¬çš„å·¥ä½œäº†ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œè¿™åªæ˜¯å®Œæˆäº†é¡¹ç›®èµ·æ­¥æœŸï¼Œé¡¹ç›®ä¸­è¿˜ä¸å­˜åœ¨å¤§é‡çš„ä¸­æ–‡å­—ç¬¦ä¸²çš„æƒ…å†µï¼›æš‚æ—¶å…ˆä¸è€ƒè™‘é¡¹ç›®å·²ç»å¼€å‘å®Œæˆçš„æƒ…å†µï¼Œæ¥ä¸‹æ¥å…ˆæ¥ä¼˜åŒ–ä¸‹ï¼Œæˆ‘ä»¬åˆšåˆšå†™è¿‡çš„ä»£ç ï¼›<br/>
å¯¹äº <code>showLbl</code> æ–¹æ³•ä¸­çš„å†…å®¹ï¼Œå¯ä»¥å®šä¹‰æˆå®ï¼Œä»¥ä¾›é¡¹ç›®ä¸­ï¼Œä»»ä½•åœ°æ–¹éœ€è¦å¤šå…ƒåŒ–æ—¶çš„ä½¿ç”¨;</p>

<pre><code> 
 #define ASLocalizedString(key)  [NSString stringWithFormat:@"%@", [[NSBundle bundleWithPath:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%@",[[NSUserDefaults standardUserDefaults] objectForKey:@"appLanguage"]] ofType:@"lproj"]] localizedStringForKey:(key) value:nil table:@"ASLocalized"]]
</code> </pre>


<p>
ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘å°†<code>showLbl</code> ä¸­å–keyå¯¹åº”çš„è¯­è¨€å†…å®¹ï¼Œå°è£…è¿›äº†ä¸€ä¸ªå¸¦å‚æ•°çš„å®ä¸­ï¼›</p>

<p>ä½¿ç”¨èµ·æ¥å°±å¾ˆEasyäº†ï¼Œåªéœ€è¦è¿™æ ·ä½¿ç”¨å³å¯ï¼š <code>ASLocalizedString(@"showTxt")</code></p>

<p>æˆ‘åœ¨githubä¸Šï¼Œä¸Šä¼ äº†æœ¬ç¯‡<a href="https://github.com/Ashen-Zhao/easyLocalized">Demo</a> ä»¥ä¾›è¾…åŠ©å‚è€ƒï¼›</p>

<p><a href="https://github.com/Ashen-Zhao/easyLocalized">æŸ¥çœ‹Demo ç‚¹å‡»è¿™é‡Œ</a></p>

<blockquote><h4>ç›¸å…³æ–‡ç« </h4>

<h4><a href="/blog/2016/01/14/localized01/">iOS å¤šè¯­è¨€ç‰ˆæœ¬çš„å¼€å‘ï¼ˆä¸€ï¼‰</a></h4></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS å¤šè¯­è¨€ç‰ˆæœ¬çš„å¼€å‘ï¼ˆä¸€ï¼‰]]></title>
    <link href="http://ashen-zhao.github.io/blog/2016/01/14/localized01/"/>
    <updated>2016-01-14T11:13:56+08:00</updated>
    <id>http://ashen-zhao.github.io/blog/2016/01/14/localized01</id>
    <content type="html"><![CDATA[<h2>å¼•è¨€</h2>

<p>&emsp;å¤šè¯­è¨€ &amp; æœ¬åœ°åŒ–ï¼Œéšä½ æ€ä¹ˆå«ï¼Œé“ç†å·®ä¸å¤šï¼›ä¸€ä¸ªApp è¦æƒ³èµ°å‡ºå›½é—¨ï¼Œåªæ”¯æŒä¸€ç§è¯­è¨€æ˜¯ä¸èƒ½å¤Ÿçš„ï¼Œä¹Ÿæ˜¯ä¸å¯èƒ½çš„ï¼Œå¤šå…ƒåŒ–ä¸–ç•Œå·²ç»èå…¥æˆ‘ä»¬çš„ç”Ÿæ´»ï¼Œå¯¹äºä¸€äº›åº”ç”¨ï¼Œå¼€å‘å¤šè¯­è¨€ç‰ˆæœ¬ï¼Œå·²ç»æ˜¯ä¸å¯é¿å…çš„ï¼Œç‰¹åˆ«æ˜¯æ—…æ¸¸ç­‰æ–¹é¢çš„åº”ç”¨ï¼›å›½å†…ä¹Ÿæœ‰å¾ˆå¤šApp å·²ç»æ¥å…¥å¤šè¯­è¨€ï¼Œä¾‹å¦‚ï¼šæ”¯ä»˜å®ã€å¾®ä¿¡ã€æ”¶ç•™æˆ‘ï¼ˆå˜»å˜»ï¼Œåšä¸‹å¹¿å‘Šï¼‰ç­‰ï¼›</p>

<h2>å¼€å‘å¤šè¯­è¨€ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æƒ…å†µ</h2>

<p>1ã€Appè¿˜æ²¡æœ‰å¼€å§‹å†™ï¼Œè¿™ä¸ªæ—¶å€™åˆ›å»ºä¸€ä¸ªå¤šè¯­è¨€ç‰ˆæœ¬ï¼Œå¾ˆæ˜¯å®¹æ˜“ï¼Œç„¶åå†å†™ä»£ç çš„æ—¶å€™ç¨å¾®ç•™æ„ä¸‹å“ªé‡Œéœ€è¦ä¿æŒå¤šè¯­è¨€å°±è¡Œäº†ï¼›<br/>
2ã€Appå·²ç»ä¸Šçº¿äº†ï¼Œè€Œä¸”ä¹‹å‰æ²¡æœ‰ä»»ä½•çš„ä¸ºå¼€å‘å¤šè¯­è¨€å‡†å¤‡è¿‡ï¼Œè¿™æ—¶å€™Bossè®©å¼€å‘å¤šè¯­è¨€ç‰ˆæœ¬ï¼Œè¿™ä¸‹ä½ å°±è‹¦é€¼äº†ï¼Œæƒ³æƒ³é¡¹ç›®ä¸­é•¿é•¿çŸ­çŸ­çš„ä¸­æ–‡å­—ç¬¦ä¸²ï¼Œæ²¡æœ‰ä¸Šåƒä¹Ÿå¾—ä¸Šå‡ ç™¾äº†å§ï¼Œåœ¨æƒ³æƒ³ä¸€ä¸ªä¸€ä¸ªæ›¿æ¢ï¼Œå“å‘€å¦ˆå‘€ï¼Œé‚£ä¹ˆå¤šï¼Œæƒ³æƒ³éƒ½æƒ³æ­»äº†ï¼Œåœ¨æƒ³æƒ³è¿˜å®¹æ˜“å‡ºé”™ï¼Œå“å‘€å¦ˆå‘€ï¼Œè®©æˆ‘æ­»äº†ç®—äº†ï¼›</p>

<!--more-->


<p>åˆ«æ€¥ï¼Œè¿™æ¬¡æˆ‘å°±é’ˆå¯¹ä¸¤ç§æƒ…å†µéƒ½è®²è§£ä¸‹ï¼›</p>

<h3>é¡¹ç›®åˆšå¼€å§‹å¯åŠ¨</h3>

<h4>1ã€æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼ˆæˆ‘å°±ä¸å¤šè¯´äº†ï¼‰</h4>

<h4>2ã€command + N æ·»åŠ å¤šè¯­è¨€æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾</h4>

<p><img src="/images/localized01.png" alt="æ·»åŠ å¤šè¯­è¨€æ–‡ä»¶" /></p>

<h4>3ã€æ·»åŠ å¤šè¯­è¨€ï¼Œå¦‚å›¾</h4>

<p><img src="/images/localized02.png" alt="æ·»åŠ å¤šè¯­è¨€" /></p>

<p>é€‰æ‹©English  ç‚¹å‡»Localize<br/>
<img src="/images/localized03.png" alt="æ·»åŠ å¤šè¯­è¨€" /></p>

<p><strong>åˆ°è¿™é‡Œå·²ç»ç®—æ˜¯æ·»åŠ å¥½äº†å¤šè¯­è¨€æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ·»åŠ å¤šè¯­è¨€</strong></p>

<p>ä¹‹å‰çš„XCodeï¼ˆå…·ä½“åˆ°å“ªä¸€ä¸ªç‰ˆæœ¬ä¹‹å‰ï¼Œä¸æ¸…æ¥šäº†ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯XCode7ï¼‰ï¼Œæ˜¯å¯ä»¥åœ¨å¦‚ä¸‹å›¾ä¸­ç›´æ¥ç‚¹å‡»â•å· ï¼Œæ·»åŠ å¤šè¯­è¨€çš„</p>

<p><img src="/images/localized04.png" alt="æ·»åŠ å¤šè¯­è¨€" /></p>

<p>ç°åœ¨éœ€è¦è¿›å…¥é¡¹ç›®çš„Projectä¸­çš„Localizations ä¸­è¿›è¡Œæ·»åŠ ï¼Œå¦‚å›¾</p>

<p><img src="/images/localized05.png" alt="æ·»åŠ å¤šè¯­è¨€" /></p>

<p>æˆ‘åªæ·»åŠ äº†ä¸­æ–‡ç¹ä½“ï¼Œç®€ä½“ï¼Œä»¥åŠè‹±æ–‡ï¼ŒDemoä½¿ç”¨çš„StoryBoard, è€Œæ·»åŠ å¤šè¯­è¨€æ—¶ï¼Œæˆ‘æ²¡æœ‰é€‰æ‹©ä¸ºStoryBoardæ·»åŠ å¤šè¯­è¨€ç‰ˆæœ¬çš„ï¼Œæ¯•ç«Ÿæ˜¯DemoğŸ´ï¼›ä½†æ˜¯ä¸å½±å“ä½¿ç”¨ã€‚</p>

<p><img src="/images/localized06.png" alt="æ·»åŠ å¤šè¯­è¨€" /></p>

<p>åˆ°è¿™é‡Œå¤šè¯­è¨€æ–‡ä»¶ä¸­ä¼šå‡ºç°å¦‚ä¸Šå›¾ä¸­çš„ä¸‰ä¸ª.strings åç¼€çš„æ–‡ä»¶ï¼Œè¿™å°±æ˜¯å¤šè¯­è¨€å¯¹åº”çš„æ–‡ä»¶äº†ï¼Œå¤šè¯­è¨€æ·»åŠ çš„æ–¹å¼ç±»ä¼¼ï¼Œå­—å…¸ key=value ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œkey åœ¨ä¸‰ä¸ª.strings ä¸­å¿…é¡»ä¸€è‡´ï¼Œè€Œvalue åˆ™åˆ†åˆ«å¯¹åº”ä¸åŒçš„è¯­è¨€å­—ä½“ï¼Œå³å¯ï¼›</p>

<h4>4ã€å¤šè¯­è¨€æ–‡ä»¶çš„ä½¿ç”¨</h4>

<p>ç°åˆ†åˆ«åœ¨ä¸åŒçš„è¯­è¨€æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹æµ‹è¯•æ–‡æœ¬ï¼š</p>

<p><code>"showTxt"="this is test text";</code><br/>
<code>"showTxt"="è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•çš„æ–‡æœ¬";</code><br/>
<code>"showTxt"="é€™æ˜¯ä¸€å€‹æ¸¬è©¦çš„æ–‡æœ¬";</code></p>

<p>è¯´åˆ°ä½¿ç”¨ï¼Œå°±è¦äº†è§£ä¸‹<code>NSLocalizedString</code>  æ˜¯ä»€ä¹ˆ</p>

<pre><code>
 #define NSLocalizedString(key, comment) \
        [[NSBundle mainBundle] localizedStringForKey:(key) value:@"" table:nil]
 #define NSLocalizedStringFromTable(key, tbl, comment) \
        [[NSBundle mainBundle] localizedStringForKey:(key) value:@"" table:(tbl)]
 #define NSLocalizedStringFromTableInBundle(key, tbl, bundle, comment) \
        [bundle localizedStringForKey:(key) value:@"" table:(tbl)]
 #define NSLocalizedStringWithDefaultValue(key, tbl, bundle, val, comment) \
        [bundle localizedStringForKey:(key) value:(val) table:(tbl)] </code></pre>


<p>å…¶å®å°±æ˜¯å®ï¼Œè€Œå®å®šä¹‰çš„åˆæ˜¯åœ¨èµ„æºæ–‡ä»¶ä¸­å¯»æ‰¾å¯¹åº”çš„èµ„æºæ–‡ä»¶ï¼›<strong>åœ¨è¿™é‡Œæœ‰ä¸ªå‘ç‚¹</strong>ï¼Œå½“ä½ ä½¿ç”¨ç¬¬ä¸€ç§å®ç°å¤šè¯­è¨€æœ¬åœ°åŒ–ï¼Œæ„å‘³ç€ä½ çš„å¤šè¯­è¨€æ–‡ä»¶åå­—<strong>å¿…é¡»</strong>æ˜¯<code>Localizable</code>,å¦åˆ™ä½ çš„å¤šè¯­è¨€å®ç°ï¼Œåˆ°æœ€åæ˜¾ç¤ºçš„å´åªèƒ½æ˜¯keyï¼› <br/>
ç¬¬ä¸€ç§é€‚åˆäºï¼Œè®©åº”ç”¨è·Ÿéšç³»ç»Ÿçš„è¯­è¨€ç‰ˆæœ¬è¿›è¡Œåˆ‡æ¢ï¼Œè€Œç”¨æˆ·å´ä¸èƒ½æ‰‹åŠ¨è¿›è¡Œåˆ‡æ¢ï¼› æˆ‘ä»¬è¦å®ç°çš„æ˜¯æ—¢å¯ä»¥è·Ÿéšç³»ç»Ÿï¼Œåˆå¯ä»¥ç”¨æˆ·è‡ªå·±åˆ‡æ¢ï¼Œå°±ä¸èƒ½ä½¿ç”¨è¿™ä¸€ä¸ªäº†ï¼Œé‚£å°±è¦ä½¿ç”¨ç¬¬äºŒç§<code>NSLocalizedStringFromTable(key, tbl, comment)</code>&emsp;tblè¿™ä¸ªå‚æ•°ï¼Œå°±æ˜¯æˆ‘ä»¬è‡ªå·±å‘½åçš„å¤šè¯­è¨€æ–‡ä»¶åç§°ï¼›</p>

<p>å› æ­¤æˆ‘ä»¬æš‚ä¸”è¿™æ ·ä½¿ç”¨ï¼ˆè¿™æ ·ç›´æ¥ä½¿ç”¨ï¼Œä¼šè·Ÿéšç³»ç»Ÿè¯­è¨€ï¼‰ï¼š</p>

<p><code>NSLocalizedStringFromTable(@"showTxt", @"ASLocalized", nil);</code></p>

<p>å‚æ•°è¯´æ˜ï¼š ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯å¤šè¯­è¨€ä¸­çš„key, ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ˜¯å¤šè¯­è¨€æ–‡ä»¶çš„åå­—ï¼Œç¬¬ä¸‰ä¸ªæ˜¯å¯¹keyçš„æ³¨é‡Šè¯´æ˜ï¼Œä¸€èˆ¬ä¸ºnilå°±å¯ä»¥äº†ï¼›</p>

<p>å¯¹äºè¿™æ ·ä½¿ç”¨<code>NSLocalizedString("showTxt", nil)</code> ï¼Œåˆ‡è®°å¤šè¯­è¨€æ–‡ä»¶å<strong>å¿…é¡»</strong>æ˜¯<code>Localizable</code>, è¿™é‡Œæˆ‘ä»¬å°±ä¸å¯ä»¥ä½¿ç”¨è¿™ç§äº†ï¼›</p>

<h4>åˆ°è¿™é‡Œï¼Œå°±å¯ä»¥å®ç°ç®€å•çš„è·Ÿéšç³»ç»Ÿè¯­è¨€çš„å¤šè¯­è¨€ç‰ˆæœ¬äº†;</h4>

<p>æ•ˆæœå›¾å¦‚ä¸‹ï¼š</p>

<p><img src="/images/localized07.png" alt="æ·»åŠ å¤šè¯­è¨€" /><br/>
<img src="/images/localized08.png" alt="æ·»åŠ å¤šè¯­è¨€" /></p>

<blockquote><h4>ç›¸å…³æ–‡ç« </h4>

<h4><a href="/blog/2016/01/15/localized02/">iOS å¤šè¯­è¨€ç‰ˆæœ¬çš„å¼€å‘ï¼ˆäºŒï¼‰</a></h4></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[UIWebView ä¸ åŸç”Ÿç³»ç»Ÿçš„ç®€å•è·³è½¬äº¤äº’]]></title>
    <link href="http://ashen-zhao.github.io/blog/2016/01/11/webview/"/>
    <updated>2016-01-11T10:15:09+08:00</updated>
    <id>http://ashen-zhao.github.io/blog/2016/01/11/webview</id>
    <content type="html"><![CDATA[<h3>ç®€å•ä»‹ç»UIWebView</h3>

<p>â€ƒå…³äºUIWebViewè¿™é‡Œæˆ‘å°±ä¸å¤šä»‹ç»äº†ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªåœ¨iOS ç«¯æ˜¾ç¤ºç½‘é¡µçš„ä¸€ä¸ªæ§ä»¶ï¼›</p>

<h3>UIWebViewçš„ä½¿ç”¨</h3>

<p>â€ƒå®ƒæ—¢ç„¶ä¹Ÿæ˜¯viewï¼Œå½“ç„¶å°±å¯ä»¥åƒå…¶ä»–viewä¸€æ ·çš„åˆ›å»ºï¼Œå¦‚ä¸‹ï¼š</p>

<pre><code> UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 560)];

 webView.delegate = self;//å…ˆåœ¨æ­¤è®¾ç½®ä¸‹ä»£ç†ï¼Œç­‰ä¸‹ä¼šå®ç°å…¶ä»£ç†æ–¹æ³•</code></pre>


<p> <!--more-->
â€ƒå½“ç„¶è¿™æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæƒ³è¦åŠ è½½ä¸€ä¸ªç½‘é¡µè¿˜éœ€è¦å®ç°<code>loadRequest:</code>è¿™ä¸ªæ–¹æ³•ï¼›è¿™æ—¶ä½ ä¼šå‘ç°è¯¥æ–¹æ³•éœ€è¦ä¸€ä¸ª<code>NSURLRequest</code>ç±»å‹çš„å‚æ•°ï¼›é‚£ç®€å•æˆ‘ä»¬å°±æ¥åˆ›å»ºä¸€ä¸ªåˆå¦‚ä½•ï¼›æˆ‘ä»¬ä½¿ç”¨NSURLRequestçš„ç±»æ–¹æ³•<code>requestWithURL:</code>æ¥åˆ›å»ºï¼›å’¦ï¼Œåˆä¼šå‘ç°è¿™ä¸ªç±»æ–¹æ³•éœ€è¦ä¸€ä¸ª<code>NSURL</code>ç±»å‹çš„å‚æ•°ï¼›ä¸ç®¡äº†ï¼Œé‚£å°±å…ˆåˆ›å»ºNSURLå¯¹è±¡å§ï¼›</p>

<pre><code>
 NSURL *url = [NSURL URLWithString:@"http://www.baidu.com"];

[webView loadRequest:[NSURLRequest requestWithURL:url];</code></pre>


<p>â€ƒåˆ‡è®°åé¢ä¸€å®šè¦æ˜¯ä¸€ä¸ªå¯è®¿é—®çš„ç½‘å€ï¼›
â€ƒæœ€åï¼Œå› ä¸ºå®ƒä¹Ÿæ˜¯Viewï¼Œåˆ«å¿˜è®°åŠ åˆ°çˆ¶è§†å›¾ä¸Š</p>

<pre><code>[self.view addSubview:webView];</code></pre>


<p>æ—¢ç„¶è¦å®ç°ä¸åŸç”Ÿç³»ç»Ÿçš„äº¤äº’ï¼Œé‚£å°±ä¸å¾—ä¸å®ç°å®ƒçš„ä»£ç†æ–¹æ³•</p>

<pre><code>-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
   NSString *urlStr = request.URL.absoluteString; //å–å‡ºwebViewäº¤äº’çš„urlé“¾æ¥ï¼›
        //æ ¹æ®urlStré“¾æ¥ä¸­çš„å‚æ•°ï¼Œå»pushåˆ°ç³»ç»Ÿä¸­çš„ä»»ä½•é¡µé¢éƒ½å¯ä»¥çš„
       /*å®ç°code
        .....
       */
      return YES;
}</code></pre>


<p>â€ƒ<b>é™„åŠ è¯´æ˜</b>ï¼šurlStræ˜¯ç½‘é¡µä¸­ï¼Œç‚¹å‡»å¸¦æœ‰å“åº”ï¼Œä¼ è¿‡æ¥çš„ç½‘å€ï¼Œè¿™ä¸ªç½‘å€è¦çœ‹ä½ æœåŠ¡ç«¯ç»™çš„ä»€ä¹ˆå†…å®¹ï¼Œé’ˆå¯¹å†…å®¹å»è·³è½¬åˆ°å¯¹è±¡çš„é¡µé¢(å¦‚ï¼šæ˜¯ä¸€ä¸ªå¤´åƒçš„ç‚¹å‡»ï¼Œåˆ™è·³è½¬åˆ°å¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™æ˜¯ç½‘å€ä¸­ï¼ŒæœåŠ¡ç«¯å°±åº”è¯¥å°è£…çš„æœ‰å¯¹åº”çš„ç”¨æˆ·çš„ID);
â€ƒè¯¥ä»£ç†æ–¹æ³•è¿”å›å€¼æ˜¯BOOLç±»å‹çš„ï¼Œæ‰€ä»¥å½“ä½ éœ€è¦ç”¨webViewæ¥æ˜¾ç¤ºçš„æ—¶å€™ï¼Œä¸€å®šè¦è¿”å›YES; è‡³äºè·³è½¬åˆ°Appå†…å…¶ä»–é¡µé¢å°±æ²¡æœ‰è¿™ä¹ˆè®²ç©¶äº†ï¼ŒYES or NO all ok; å»ºè®®è¿”å›NO, ä»¥å…å‡ºç°webå†…ä¸åº”ç”¨å†…ä¸¤æ¬¡è·³è½¬ï¼›
â€ƒå¦‚æœæœåŠ¡ç«¯éœ€è¦ä¼ å‚æ•°è¿›å»ï¼ˆå¦‚ï¼štoken) ï¼Œè¿™æ˜¯ä½ å°±éœ€è¦åœ¨åˆ›å»º<code>NSURL</code>å¯¹è±¡æ—¶ï¼Œå°†tokenå°è£…è¿›å»</p>

<pre>[NSURL URLWithString:@"http://www.baidu.com?token=pzshgawegwegeugiwef93i24"]</pre>


<h6>è‡ªå·±åœ¨é¡¹ç›®ä¸­å°±æ˜¯è¿™ä¹ˆå®ç°çš„ï¼Œå¦‚æœæœ‰ç–‘é—®æˆ–è€…æœ‰æ›´å¥½åœ°æ–¹æ³•ï¼Œè¯·ä¸ç•™è¨€äº¤æµï¼›</h6>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS å¸¸ç”¨åŠ å¯†æ–¹æ³•]]></title>
    <link href="http://ashen-zhao.github.io/blog/2016/01/07/datasafety/"/>
    <updated>2016-01-07T17:30:15+08:00</updated>
    <id>http://ashen-zhao.github.io/blog/2016/01/07/datasafety</id>
    <content type="html"><![CDATA[<h3>ä¸ºä½•è¦åŠ å¯†</h3>

<p>&emsp;ä¸ºä»€ä¹ˆè¦åŠ å¯†ï¼Œé¡¾åæ€ä¹‰ï¼Œå¦‚æœä½ ä¸æƒ³è®©åˆ«äººè½»è€Œæ˜“ä¸¾çš„å°±æ‹¿åˆ°ä½ çš„è´¦å·ä»¥åŠç™»å½•å¯†ç ï¼Œå¦‚æœä½ ä¸æƒ³è®©åˆ«äººè·å–ä½ çš„æ•æ„Ÿçš„æ•°æ®(åˆ©ç›Šã€èŠå¤©ç­‰æ•°æ®),and so on; ä¸å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œé‚£å°±åƒä½ åªç©¿ä¸ªè£¤å¤´ï¼Œåœ¨åˆ°å¤„è·‘ï¼Œéšæ—¶éƒ½å¯èƒ½èµ°å…‰ï¼›åŠ å¯†çš„é‡è¦æ€§ï¼Œæˆ‘ä¸å¤šè¯´ï¼Œè‡ªå·±æ‚Ÿå§;<br/>
&emsp;iOS å¼€å‘ä¸­ç»å¸¸ç”¨åˆ°çš„å‡ ç§åŠ å¯†æ–¹å¼ï¼šMD5ã€Base64ã€RSAã€AES<br/>
&emsp;ä¸€èˆ¬æ¥è¯´æœ€å¸¸ç”¨çš„å°±æ˜¯MD5å’ŒBase64ï¼š</p>

<blockquote><ol>
<li>MD5ä¸»è¦åº”ç”¨äºæ™®é€šè¯·æ±‚ã€è¿”å›æ•°æ®ï¼Œè¿›è¡Œæ•°æ®å®Œæ•´æ€§æ ¡éªŒ</li>
<li>Base64 ä¸»è¦ç”¨äºé˜²æ­¢æ•°æ®æ˜æ–‡ä¼ è¾“</li>
<li>AES ä¸€èˆ¬ç”¨äºç™»å½•åŠ å¯†</li>
<li>RSA ç»å¸¸ç”¨äºé‡è¦æ•°æ® ä»¥åŠæ•æ„Ÿæ•°æ®çš„åŠ å¯†</li>
</ol>
</blockquote>

<!--more-->


<h2>MD5</h2>

<pre><code>- (NSString *) stringFromMD5 {
if(self == nil || [self length] == 0) {        return nil;
}    const char *value = [self UTF8String];    unsigned char outputBuffer[CC_MD5_DIGEST_LENGTH];
CC_MD5(value, strlen(value), outputBuffer);
NSMutableString *outputString = [[NSMutableString alloc] initWithCapacity:CC_MD5_DIGEST_LENGTH * 2];
for(NSInteger count = 0; count &lt; CC_MD5_DIGEST_LENGTH; count++){        [outputString appendFormat:@"%02x",outputBuffer[count]];
}       return outputString;
}
</code></pre>

<p>å¯¼å…¥å¤´æ–‡ä»¶ï¼š#import &lt;CommonCrypto/CommonDigest.h> <br/>
 è¯¥æ–¹æ³•ä¸ºNSStringçš„åˆ†ç±»æ–¹æ³•</p>

<h2>Base64</h2>

<pre><code>static const char _base64EncodingTable[64] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
static const short _base64DecodingTable[256] = {
-2, -2, -2, -2, -2, -2, -2, -2, -2, -1, -1, -2, -1, -1, -2, -2,
-2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2,
-1, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, 62, -2, -2, -2, 63,
52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -2, -2, -2, -2, -2, -2,
-2,  0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14,
15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -2, -2, -2, -2, -2,
-2, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -2, -2, -2, -2, -2,
-2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2,
-2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2,
-2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2,
-2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2,
-2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2,
-2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2,
-2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2,
-2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2
};


+ (NSString *) encodeBase64WithString: (NSString *) strData {
NSData *objData = [strData dataUsingEncoding:NSUTF8StringEncoding];
const unsigned char * objRawData = [objData bytes];
char * objPointer;    char * strResult;    // Get the Raw Data length and ensure we actually have data
int intLength = [objData length];    if (intLength == 0) return nil;    // Setup the String-based Result placeholder and pointer within that placeholder
strResult = (char *)calloc(((intLength + 2) / 3) * 4, sizeof(char));    objPointer = strResult;    // Iterate through everything
while (intLength &gt; 2) { // keep going until we have less than 24 bits        *objPointer++ = _base64EncodingTable[objRawData[0] &gt;&gt; 2];        *objPointer++ = _base64EncodingTable[((objRawData[0] &amp; 0x03) &lt;&lt; 4) + (objRawData[1] &gt;&gt; 4)]; *objPointer++ = _base64EncodingTable[((objRawData[1] &amp; 0x0f) &lt;&lt; 2) + (objRawData[2] &gt;&gt; 6)]; *objPointer++ = _base64EncodingTable[objRawData[2] &amp; 0x3f];        // we just handled 3 octets (24 bits) of data
    objRawData += 3;        intLength -= 3;    }    // now deal with the tail end of things    if (intLength != 0) {        *objPointer++ = _base64EncodingTable[objRawData[0] &gt;&gt; 2];        if (intLength &gt; 1) {            *objPointer++ = _base64EncodingTable[((objRawData[0] &amp; 0x03) &lt;&lt; 4) + (objRawData[1] &gt;&gt; 4)]; *objPointer++ = _base64EncodingTable[(objRawData[1] &amp; 0x0f) &lt;&lt; 2];            *objPointer++ = '=';        } else {            *objPointer++ = _base64EncodingTable[(objRawData[0] &amp; 0x03) &lt;&lt; 4];            *objPointer++ = '=';            *objPointer++ = '=';        }    }    // Terminate the string-based result
*objPointer = '\0';    NSString *rstStr = [NSString stringWithCString:strResult encoding:NSASCIIStringEncoding]; free(objPointer);    return rstStr;    }


+ (NSData *)decodeBase64WithString:(NSString *)strBase64 {
const char *objPointer = [strBase64 cStringUsingEncoding:NSASCIIStringEncoding];
size_t intLength = strlen(objPointer);
int intCurrent;
int i = 0, j = 0, k;

unsigned char *objResult = calloc(intLength, sizeof(unsigned char));

// Run through the whole string, converting as we go
while ( ((intCurrent = *objPointer++) != '\0') &amp;&amp; (intLength-- &gt; 0) ) {
    if (intCurrent == '=') {
        if (*objPointer != '=' &amp;&amp; ((i % 4) == 1)) {// || (intLength &gt; 0)) {
            // the padding character is invalid at this point -- so this entire string is invalid
            free(objResult);
            return nil;
        }
        continue;
    }

    intCurrent = _base64DecodingTable[intCurrent];
    if (intCurrent == -1) {
        // we're at a whitespace -- simply skip over
        continue;
    } else if (intCurrent == -2) {
        // we're at an invalid character
        free(objResult);
        return nil;
    }

    switch (i % 4) {
        case 0:
            objResult[j] = intCurrent &lt;&lt; 2;
            break;

        case 1:
            objResult[j++] |= intCurrent &gt;&gt; 4;
            objResult[j] = (intCurrent &amp; 0x0f) &lt;&lt; 4;
            break;

        case 2:
            objResult[j++] |= intCurrent &gt;&gt;2;
            objResult[j] = (intCurrent &amp; 0x03) &lt;&lt; 6;
            break;

        case 3:
            objResult[j++] |= intCurrent;
            break;
    }
    i++;
}

// mop things up if we ended on a boundary
k = j;
if (intCurrent == '=') {
    switch (i % 4) {
        case 1:
            // Invalid state
            free(objResult);
            return nil;

        case 2:
            k++;
            // flow through
        case 3:
            objResult[k] = 0;
    }
}

// Cleanup and setup the return NSData
NSData * objData = [[NSData alloc] initWithBytes:objResult length:j];
free(objResult);
return objData;
}
</code></pre>

<h2>RSA</h2>

<p>RSA: æ¯”è¾ƒå¤æ‚ï¼Œè¿™æœ‰ä¸€ç¯‡åšå®¢å¯ä»¥å‚è€ƒ<a href="http://blog.iamzsx.me/show.html?id=155002">iOSä¸‹çš„RSAåŠ å¯†ç®—æ³•</a></p>

<h2>AES</h2>

<p>å¯¹äºAES è¿™ä¹Ÿæœ‰ä¸€ä¸ªä¸é”™çš„åšå®¢<a href="http://www.tuicool.com/articles/UVRjmyN">AESåŠ å¯†ç®—æ³•</a></p>
]]></content>
  </entry>
  
</feed>
